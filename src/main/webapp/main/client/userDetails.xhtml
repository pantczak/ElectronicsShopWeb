<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: pantczak
  Date: 1/10/21
  Time: 5:49 PM
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">


<h:head>
    <title>UserDetails</title>
</h:head>

<h:form>
    Login:
    <h:outputText value="#{userDetailsController.login}">Login:</h:outputText>

    <h:dataTable value="#{userDetailsController.userBorrows}" var="borrow">
        <h:column>
            <f:facet name="header">ID</f:facet>
            #{borrow.uuid}
        </h:column>

        <h:column>
            <f:facet name="header">Borrow date</f:facet>
            #{borrow.borrowDate}
        </h:column>

        <h:column>
            <f:facet name="header">Return date</f:facet>
            #{borrow.returnDate}
        </h:column>

        <h:column>
            <f:facet name="header">Device brand </f:facet>
            #{borrow.device.brand}
        </h:column>

        <h:column>
            <f:facet name="header">Device model </f:facet>
            #{borrow.device.model}
        </h:column>

        <h:column>
            <f:facet name="header">Device ID </f:facet>
            #{borrow.device.uuid}
        </h:column>

        <h:column rendered="#{userDetailsController.login == facesContext.externalContext.userPrincipal.name}">
            <f:facet name="header"/>
            <h:commandButton value="End borrow" actionListener="#{userDetailsController.endBorrow(borrow)}">
            </h:commandButton>
        </h:column>

    </h:dataTable>
</h:form>

<h:form>
<h:commandButton action="menu"  value="Back" immediate="true"/>
</h:form>
<h:body>

</h:body>

</html>